
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ice Guardian Alert</title>
    <meta name="description" content="Medical alert and health monitoring system for seniors and expatriates" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap">
    <style>
      /* Critical CSS to ensure content is visible immediately */
      html, body, #root, .App {
        margin: 0;
        padding: 0;
        font-family: 'Inter', sans-serif;
        background-color: white !important;
        color: black !important;
        visibility: visible !important;
        opacity: 1 !important;
        min-height: 100vh;
        width: 100%;
        overflow-x: hidden;
        display: block !important;
      }
      
      /* Initial loading fallback */
      .initial-loading {
        text-align: center;
        padding: 2rem;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }
      
      /* Loading spinner */
      .loading-spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top-color: #0070f3;
        animation: spin 1s ease-in-out infinite;
        margin: 20px auto;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
    </style>
    <script>
      // Immediate script to ensure visibility
      document.documentElement.style.visibility = 'visible';
      document.documentElement.style.display = 'block';
      
      // Set a timeout to bypass loading if it takes too long
      setTimeout(function() {
        var loading = document.querySelector('.initial-loading');
        if (loading) {
          loading.innerHTML = `
            <h1>Ice Guardian Alert</h1>
            <p>Loading is taking longer than expected.</p>
            <button onclick="window.location.reload()" 
              style="padding: 8px 16px; background: #0070f3; color: white; 
              border: none; border-radius: 4px; cursor: pointer; margin-top: 20px;">
              Refresh Page
            </button>
            <button onclick="document.querySelector('.manual-entry').style.display='block'" 
              style="padding: 8px 16px; background: #28a745; color: white; 
              border: none; border-radius: 4px; cursor: pointer; margin-top: 20px; margin-left: 10px;">
              Bypass Loading
            </button>
            <div class="manual-entry" style="display:none; margin-top: 20px; text-align: center;">
              <h2>Quick Access</h2>
              <p>Select a page to visit directly:</p>
              <div>
                <a href="/" style="display: inline-block; margin: 5px; padding: 5px 10px; background: #f1f1f1; border-radius: 4px; text-decoration: none; color: black;">Home</a>
                <a href="/products" style="display: inline-block; margin: 5px; padding: 5px 10px; background: #f1f1f1; border-radius: 4px; text-decoration: none; color: black;">Products</a>
                <a href="/contact" style="display: inline-block; margin: 5px; padding: 5px 10px; background: #f1f1f1; border-radius: 4px; text-decoration: none; color: black;">Contact</a>
                <a href="/about" style="display: inline-block; margin: 5px; padding: 5px 10px; background: #f1f1f1; border-radius: 4px; text-decoration: none; color: black;">About</a>
              </div>
            </div>
          `;
        }
      }, 8000); // 8 seconds
    </script>
  </head>

  <body>
    <noscript>
      <div style="text-align: center; padding: 2rem; font-family: system-ui, sans-serif;">
        <h1>JavaScript is required</h1>
        <p>Please enable JavaScript to use Ice Guardian Alert.</p>
      </div>
    </noscript>
    
    <div id="root">
      <!-- Initial loading state -->
      <div class="initial-loading">
        <h1>Ice Guardian Alert</h1>
        <p>Loading...</p>
        <div class="loading-spinner"></div>
      </div>
    </div>
    
    <!-- Main application script -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Fallback script for emergency access -->
    <script>
      // Set a timeout to ensure the page doesn't stay in loading state
      setTimeout(function() {
        if (!document.querySelector('.App')) {
          console.error("Application failed to initialize within timeout");
          var root = document.getElementById('root');
          if (root) {
            root.innerHTML = `
              <div style="text-align: center; padding: 2rem; font-family: system-ui, sans-serif;">
                <h1>Ice Guardian Alert</h1>
                <p>We're experiencing technical difficulties.</p>
                <button onclick="window.location.reload()" 
                  style="padding: 8px 16px; background: #0070f3; color: white; 
                  border: none; border-radius: 4px; cursor: pointer; margin-top: 20px;">
                  Retry Loading
                </button>
                <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
                  <h3>Direct Access</h3>
                  <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 15px;">
                    <a href="/" style="padding: 8px 16px; background: #f1f1f1; color: #333; text-decoration: none; border-radius: 4px;">Home</a>
                    <a href="/products" style="padding: 8px 16px; background: #f1f1f1; color: #333; text-decoration: none; border-radius: 4px;">Products</a>
                    <a href="/about" style="padding: 8px 16px; background: #f1f1f1; color: #333; text-decoration: none; border-radius: 4px;">About Us</a>
                    <a href="/contact" style="padding: 8px 16px; background: #f1f1f1; color: #333; text-decoration: none; border-radius: 4px;">Contact</a>
                  </div>
                </div>
              </div>
            `;
          }
        }
      }, 15000); // 15 seconds timeout
    </script>
  </body>
</html>
